import"../chunks/NZTpNUN0.js";import{V as fe,P as J,au as Ye,X as Ue,Q as Je,O as Qe,E as s,ad as Xe,S as qe,T as We,U as Te,W as me,a2 as re,av as Ze,aw as $e,Y as pe,$ as et,Z as tt,ax as ze,i as He,a6 as Be,ay as Ie,az as at,a0 as je,a1 as rt,aA as nt,aB as xe,aC as Re,aD as st,aE as it,aF as lt,aG as ot,aH as dt,aI as ut,ag as ct,a3 as vt,aJ as gt,aK as ft,aL as mt,aM as xt,aN as _t,aO as ht,aP as le,r as Z,I as O,K as x,y as pt,z as E,A as $,M as T,L as d,ar as j,ae as se,u as oe,a9 as A,x as W,J as F,N as z,aQ as Se,v as de,aR as bt,aS as kt,e as ne,F as X,as as be}from"../chunks/e4LguzAB.js";import{i as P,s as yt,a as wt,p as ie}from"../chunks/Bg1M6tz0.js";import{t as Me}from"../chunks/DlrwoFrq.js";import{i as Tt}from"../chunks/CAFT9GnP.js";function ue(a,e){return e}function It(a,e,t){for(var r=a.items,n=[],i=e.length,l=0;l<i;l++)ot(e[l].e,n,!0);var u=i>0&&n.length===0&&t!==null;if(u){var S=t.parentNode;dt(S),S.append(t),r.clear(),Y(a,e[0].prev,e[i-1].next)}ut(n,()=>{for(var _=0;_<i;_++){var I=e[_];u||(r.delete(I.k),Y(a,I.prev,I.next)),Re(I.e,!u)}})}function ce(a,e,t,r,n,i=null){var l=a,u={flags:e,items:new Map,first:null};{var S=a;l=J?fe(Ye(S)):S.appendChild(Ue())}J&&Je();var _=null,I=!1,C=new Map,g=Xe(()=>{var m=t();return He(m)?m:m==null?[]:ze(m)}),f,o;function c(){St(o,f,u,C,l,n,e,r,t),i!==null&&(f.length===0?_?je(_):_=pe(()=>i(l)):_!==null&&rt(_,()=>{_=null}))}Qe(()=>{o??=ct,f=s(g);var m=f.length;if(I&&m===0)return;I=m===0;let b=!1;if(J){var k=qe(l)===We;k!==(m===0)&&(l=Te(),fe(l),me(!1),b=!0)}if(J){for(var v=null,y,h=0;h<m;h++){if(re.nodeType===Ze&&re.data===$e){l=re,b=!0,me(!1);break}var w=f[h],N=r(w,h);y=ke(re,u,v,null,w,N,h,n,e,t),u.items.set(N,y),v=y}m>0&&fe(Te())}if(J)m===0&&i&&(_=pe(()=>i(l)));else if(et()){var B=new Set,H=tt;for(h=0;h<m;h+=1){w=f[h],N=r(w,h);var K=u.items.get(N)??C.get(N);K?Ve(K,w,h):(y=ke(null,u,null,null,w,N,h,n,e,t,!0),C.set(N,y)),B.add(N)}for(const[Q,p]of u.items)B.has(Q)||H.skipped_effects.add(p.e);H.add_callback(c)}else c();b&&me(!0),s(g)}),J&&(l=re)}function St(a,e,t,r,n,i,l,u,S){var _=e.length,I=t.items,C=t.first,g=C,f,o=null,c=[],m=[],b,k,v,y;for(y=0;y<_;y+=1){if(b=e[y],k=u(b,y),v=I.get(k),v===void 0){var h=r.get(k);if(h!==void 0){r.delete(k),I.set(k,h);var w=o?o.next:g;Y(t,o,h),Y(t,h,w),_e(h,w,n),o=h}else{var N=g?g.e.nodes_start:n;o=ke(N,t,o,o===null?t.first:o.next,b,k,y,i,l,S)}I.set(k,o),c=[],m=[],g=o.next;continue}if(Ve(v,b,y),(v.e.f&xe)!==0&&je(v.e),v!==g){if(f!==void 0&&f.has(v)){if(c.length<m.length){var B=m[0],H;o=B.prev;var K=c[0],Q=c[c.length-1];for(H=0;H<c.length;H+=1)_e(c[H],B,n);for(H=0;H<m.length;H+=1)f.delete(m[H]);Y(t,K.prev,Q.next),Y(t,o,K),Y(t,Q,B),g=B,o=Q,y-=1,c=[],m=[]}else f.delete(v),_e(v,g,n),Y(t,v.prev,v.next),Y(t,v,o===null?t.first:o.next),Y(t,o,v),o=v;continue}for(c=[],m=[];g!==null&&g.k!==k;)(g.e.f&xe)===0&&(f??=new Set).add(g),m.push(g),g=g.next;if(g===null)continue;v=g}c.push(v),o=v,g=v.next}if(g!==null||f!==void 0){for(var p=f===void 0?[]:ze(f);g!==null;)(g.e.f&xe)===0&&p.push(g),g=g.next;var D=p.length;if(D>0){var R=_===0?n:null;It(t,p,R)}}a.first=t.first&&t.first.e,a.last=o&&o.e;for(var M of r.values())Re(M.e);r.clear()}function Ve(a,e,t,r){at(a.v,e),a.i=t}function ke(a,e,t,r,n,i,l,u,S,_,I){var C=(S&st)!==0,g=(S&it)===0,f=C?g?Be(n,!1,!1):Ie(n):n,o=(S&nt)===0?l:Ie(l),c={i:o,v:f,k:i,a:null,e:null,prev:t,next:r};try{if(a===null){var m=document.createDocumentFragment();m.append(a=Ue())}return c.e=pe(()=>u(a,f,o,_),J),c.e.prev=t&&t.e,c.e.next=r&&r.e,t===null?I||(e.first=c):(t.next=c,t.e.next=c.e),r!==null&&(r.prev=c,r.e.prev=c.e),c}finally{}}function _e(a,e,t){for(var r=a.next?a.next.e.nodes_start:t,n=e?e.e.nodes_start:t,i=a.e.nodes_start;i!==null&&i!==r;){var l=lt(i);n.before(i),i=l}}function Y(a,e,t){e===null?a.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Mt(a,e,t){var r=a==null?"":""+a;return r===""?null:r}function ve(a,e,t,r,n,i){var l=a.__className;if(J||l!==t||l===void 0){var u=Mt(t);(!J||u!==a.getAttribute("class"))&&(u==null?a.removeAttribute("class"):e?a.className=u:a.setAttribute("class",u)),a.__className=t}return i}function ye(a,e,t=!1){if(a.multiple){if(e==null)return;if(!He(e))return gt();for(var r of a.options)r.selected=e.includes(Ce(r));return}for(r of a.options){var n=Ce(r);if(ft(n,e)){r.selected=!0;return}}(!t||e!==void 0)&&(a.selectedIndex=-1)}function Ee(a){var e=new MutationObserver(()=>{ye(a,a.__value)});e.observe(a,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),vt(()=>{e.disconnect()})}function Ce(a){return"__value"in a?a.__value:a.value}const Et=Symbol("is custom element"),Ct=Symbol("is html");function he(a,e,t,r){var n=Dt(a);J&&(n[e]=a.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&a.nodeName==="LINK")||n[e]!==(n[e]=t)&&(e==="loading"&&(a[mt]=t),t==null?a.removeAttribute(e):typeof t!="string"&&At(a).includes(e)?a[e]=t:a.setAttribute(e,t))}function Dt(a){return a.__attributes??={[Et]:a.nodeName.includes("-"),[Ct]:a.namespaceURI===xt}}var De=new Map;function At(a){var e=De.get(a.nodeName);if(e)return e;De.set(a.nodeName,e=[]);for(var t,r=a,n=Element.prototype;n!==r;){t=ht(r);for(var i in t)t[i].set&&e.push(i);r=_t(r)}return e}var Nt=(a,e)=>e.onToggleSettings?.(),Lt=O('<div class="mb-4 flex flex-row items-center justify-between gap-3 sm:mb-6"><h1 class="text-2xl font-bold text-gray-900 sm:text-3xl dark:text-gray-100">Status</h1> <div class="relative self-end sm:self-auto"><button class="rounded-full p-2 text-gray-600 transition-colors hover:bg-gray-100 hover:text-gray-800 dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-200" aria-label="Inställningar"><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></button> <!></div></div>');function Ot(a,e){Z(e,!0);var t=Lt(),r=T(x(t),2),n=x(r);n.__click=[Nt,e];var i=T(n,2);pt(i,()=>e.children),d(r),d(t),E(a,t),$()}le(["click"]);function Ae(a){if(!a)return null;const e=a.match(/klar ca:\s*(\d{1,2}):(\d{2})/i);if(!e)return null;const t=parseInt(e[1],10),r=parseInt(e[2],10),n=new Date;return n.setHours(t,r,0,0),n<=new Date&&n.setDate(n.getDate()+1),n}function Ut(a){if(a<60)return`${a}s`;const e=Math.floor(a/60),t=a%60;return t===0?`${e} min`:`${e} min ${t}s`}function Ne(a){switch(a){case"available":return"Ledig";case"taken":return"Upptagen";case"not_bookable":return"Ej bokningsbar";case"recently_used":return"Nyligen använd";default:return"Okänd"}}function Le(a){switch(a){case"available":return"bg-green-500";case"taken":return"bg-yellow-500";case"not_bookable":return"bg-red-500";case"recently_used":return"bg-green-300";default:return"bg-gray-500"}}function Oe(a){switch(a){case"available":return"border-green-500";case"taken":return"border-yellow-500";case"not_bookable":return"border-red-500";case"recently_used":return"border-green-300";default:return"border-gray-500"}}function Fe(a,e){if(!a)return!1;const t=a.match(/avslutades\s*(\d{1,2}):(\d{2})/i);if(!t)return!1;const r=parseInt(t[1],10),n=parseInt(t[2],10),i=new Date;i.setHours(r,n,0,0);const u=new Date(e).getTime()-i.getTime();return u>=0&&u<=36e5}function zt(a,e,t){const r=a.target,n=Number(r.value);A(e,n,!0),t.event("updateInterval",n)}var Ht=O("<option> </option>"),Bt=O("<option> </option>"),jt=(a,e)=>e.event("manualUpdate"),Rt=O('<svg class="h-4 w-4 animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span>Uppdaterar...</span>',1),Vt=O('<svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> <span>Uppdatera nu</span>',1),Ft=O('<div class="text-center text-xs text-gray-600 sm:text-sm dark:text-gray-400"> </div>'),Pt=O('<div class="text-center text-xs text-gray-600 sm:text-sm dark:text-gray-400">Automatisk uppdatering inaktiverad</div>'),Kt=O('<div class="absolute top-12 right-0 z-10 w-64 max-w-[calc(100vw-1rem)] rounded-lg border border-gray-200 bg-white p-3 shadow-lg sm:w-72 sm:p-4 md:w-80 dark:border-gray-700 dark:bg-gray-800"><h3 class="mb-3 text-sm font-semibold text-gray-900 sm:text-base dark:text-gray-100">Inställningar</h3> <div class="mb-4"><label for="theme-mode" class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">Tema</label> <select id="theme-mode" class="w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 focus:ring-2 focus:ring-blue-500 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100"></select></div> <div class="mb-4"><label for="update-interval" class="mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300">Uppdateringsintervall</label> <select id="update-interval" class="w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm text-gray-900 focus:ring-2 focus:ring-blue-500 focus:outline-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100"></select></div> <div class="mb-4"><button><!></button></div> <!> <div class="mt-2 text-center text-xs text-gray-500 dark:text-gray-500"> </div></div>'),Gt=(a,e)=>e.event("toggleSettings"),Yt=(a,e)=>a.key==="Escape"&&e.event("toggleSettings"),Jt=O('<div class="fixed inset-0 z-0" tabindex="-1" role="button" aria-label="Stäng inställningar"></div>'),Qt=O("<!> <!>",1);function Xt(a,e){Z(e,!0);const[t,r]=yt(),n=()=>wt(Me,"$themeStore",t);let i=j(se(e.updateInterval));oe(()=>{e.updateInterval!==s(i)&&A(i,e.updateInterval,!0)});function l(f){const c=f.target.value;Me.setMode(c)}const u=[{value:"system",label:"Systemets tema"},{value:"light",label:"Ljust tema"},{value:"dark",label:"Mörkt tema"}];var S=Qt(),_=W(S);{var I=f=>{var o=Kt(),c=T(x(o),2),m=T(x(c),2);m.__change=l,ce(m,21,()=>u,ue,(M,U)=>{var L=Ht(),V=x(L,!0);d(L);var G={};F(()=>{z(V,s(U).label),G!==(G=s(U).value)&&(L.value=(L.__value=s(U).value)??"")}),E(M,L)}),d(m);var b;Ee(m),d(c);var k=T(c,2),v=T(x(k),2);v.__change=[zt,i,e],ce(v,21,()=>e.intervalOptions,ue,(M,U)=>{var L=Bt(),V=x(L,!0);d(L);var G={};F(()=>{z(V,s(U).label),G!==(G=s(U).value)&&(L.value=(L.__value=s(U).value)??"")}),E(M,L)}),d(v);var y;Ee(v),d(k);var h=T(k,2),w=x(h);w.__click=[jt,e];var N=x(w);{var B=M=>{var U=Rt();Se(2),E(M,U)},H=M=>{var U=Vt();Se(2),E(M,U)};P(N,M=>{e.updating?M(B):M(H,!1)})}d(w),d(h);var K=T(h,2);{var Q=M=>{var U=Ft(),L=x(U);d(U),F(V=>z(L,`Nästa uppdatering om: ${V??""}`),[()=>Ut(e.updateTimer)]),E(M,U)},p=M=>{var U=Pt();E(M,U)};P(K,M=>{e.updateInterval>0?M(Q):M(p,!1)})}var D=T(K,2),R=x(D);d(D),d(o),F(M=>{b!==(b=n())&&(m.value=(m.__value=n())??"",ye(m,n())),y!==(y=s(i))&&(v.value=(v.__value=s(i))??"",ye(v,s(i))),w.disabled=e.updating,ve(w,1,`flex w-full items-center justify-center space-x-2 rounded-md px-4 py-2 text-sm transition-colors ${e.updating?"cursor-not-allowed bg-gray-400 text-gray-600 dark:bg-gray-600 dark:text-gray-400":"bg-blue-500 text-white hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700"}`),z(R,`Senast uppdaterad: ${M??""}`)},[()=>new Date(e.lastUpdateTime).toLocaleTimeString("sv-SE")]),E(f,o)};P(_,f=>{e.settingsOpen&&f(I)})}var C=T(_,2);{var g=f=>{var o=Jt();o.__click=[Gt,e],o.__keydown=[Yt,e],E(f,o)};P(C,f=>{e.settingsOpen&&f(g)})}E(a,S),$(),r()}le(["change","click","keydown"]);var qt=O('<div class="mt-2 rounded bg-red-100 p-2 font-mono text-xs break-words text-red-800 dark:bg-red-900/30 dark:text-red-200"> </div>'),Wt=O('<div class="mb-4 rounded-lg border border-red-200 bg-red-50 p-3 transition-colors sm:p-4 dark:border-red-800 dark:bg-red-900/20"><div class="flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between"><div class="flex items-start space-x-3"><svg class="mt-0.5 h-5 w-5 flex-shrink-0 text-red-400 dark:text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="flex-1"><h3 class="text-sm font-medium text-red-800 dark:text-red-200"> </h3> <p class="mt-1 text-sm text-red-700 dark:text-red-300"> </p> <!></div></div> <div class="flex flex-col items-stretch gap-2 sm:flex-row sm:items-center sm:space-x-2"><button class="text-center text-sm text-red-600 underline transition-colors hover:text-red-800 dark:text-red-400 dark:hover:text-red-200"> </button> <button class="rounded bg-red-600 px-3 py-2 text-sm text-white transition-colors hover:bg-red-700 disabled:cursor-not-allowed disabled:bg-red-400 dark:bg-red-700 dark:hover:bg-red-800 dark:disabled:bg-red-600"> </button></div></div></div>');function Zt(a,e){Z(e,!0);let t=ie(e,"showErrorDetails",3,!1);var r=de(),n=W(r);{var i=l=>{var u=Wt(),S=x(u),_=x(S),I=T(x(_),2),C=x(I),g=x(C,!0);d(C);var f=T(C,2),o=x(f,!0);d(f);var c=T(f,2);{var m=w=>{var N=qt(),B=x(N,!0);d(N),F(()=>z(B,e.error.message)),E(w,N)};P(c,w=>{t()&&w(m)})}d(I),d(_);var b=T(_,2),k=x(b);k.__click=function(...w){e.toggleErrorDetails?.apply(this,w)};var v=x(k);d(k);var y=T(k,2);y.__click=function(...w){e.retry?.apply(this,w)};var h=x(y,!0);d(y),d(b),d(S),d(u),F(()=>{z(g,e.error.isInitialLoad?"Kunde inte ladda data":"Uppdatering misslyckades"),z(o,e.error.isInitialLoad?"Ingen data kunde laddas från servern.":"Kunde inte uppdatera data från servern."),z(v,`${t()?"Dölj":"Visa"} detaljer`),y.disabled=e.updating,z(h,e.updating?"Försöker...":"Försök igen")}),E(l,u)};P(n,l=>{e.error&&l(i)})}E(a,r),$()}le(["click"]);var $t=O('<div class="py-12 text-center"><svg class="mx-auto mb-4 h-8 w-8 animate-spin text-blue-500 transition-colors dark:text-blue-400" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p class="text-sm text-gray-500 transition-colors sm:text-base dark:text-gray-400"> </p></div>');function ea(a,e){let t=ie(e,"message",3,"Laddar data...");var r=$t(),n=T(x(r),2),i=x(n,!0);d(n),d(r),F(()=>z(i,t())),E(a,r)}var ta=O('<div class="fixed top-2 right-2 z-50 flex max-w-xs items-center space-x-2 rounded-lg bg-blue-500 px-3 py-2 text-white shadow-lg transition-colors sm:top-4 sm:right-4 dark:bg-blue-600"><svg class="h-4 w-4 flex-shrink-0 animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <span class="text-sm font-medium">Uppdaterar...</span></div>');function aa(a,e){let t=ie(e,"updating",3,!1);var r=de(),n=W(r);{var i=l=>{var u=ta();E(l,u)};P(n,l=>{t()&&l(i)})}E(a,r)}var ra=O('<div><div class="mb-2 flex items-start justify-between gap-2"><span class="text-sm font-medium break-words text-gray-900 sm:text-base dark:text-gray-100"> </span> <span> </span></div> <p class="text-sm break-words text-gray-600 dark:text-gray-400"> </p></div>');function na(a,e){Z(e,!1);let t=ie(e,"machine",8),r=ie(e,"currentTime",8),n=Be();bt(()=>(X(t()),X(r())),()=>{A(n,t().state==="available"&&Fe(t().status,r())?"recently_used":t().state)}),kt(),Tt();var i=ra(),l=x(i),u=x(l),S=x(u,!0);d(u);var _=T(u,2),I=x(_,!0);d(_),d(l);var C=T(l,2),g=x(C,!0);d(C),d(i),F((f,o,c,m)=>{ve(i,1,`rounded-lg border-l-4 bg-gray-50 p-3 sm:rounded-xl sm:p-4 dark:bg-gray-800 ${f??""}`),z(S,(X(t()),ne(()=>t().name))),ve(_,1,`rounded-full px-2 py-1 text-xs text-white ${o??""} flex-shrink-0`),z(I,c),z(g,m)},[()=>(X(Oe),s(n),ne(()=>Oe(s(n)))),()=>(X(Le),s(n),ne(()=>Le(s(n)))),()=>(X(Ne),s(n),ne(()=>Ne(s(n)))),()=>(X(Ae),X(t()),X(r()),ne(()=>(()=>{const f=Ae(t().status);if(!f)return t().status||"Ingen status";const o=r(),c=f.getTime()-o;if(c<=0)return`${t().status} (klar)`;const m=Math.floor(c/1e3),b=Math.floor(m/60),k=m%60;let v;if(b<60)v=`(om ${b} min ${k}s)`;else{const y=Math.floor(b/60),h=b%60;h===0?v=`(om ${y} tim)`:v=`(om ${y} tim ${h} min)`}return`${t().status} ${v}`})()))]),E(a,i),$()}var sa=O('<div class="bg-white p-3 sm:p-4 dark:bg-gray-800"><div class="mb-3 text-sm text-gray-600 sm:hidden dark:text-gray-400"> </div> <div class="grid grid-cols-1 gap-3 sm:gap-4 md:grid-cols-2"></div></div>'),ia=O('<div class="overflow-hidden rounded-xl bg-white shadow transition-colors sm:rounded-2xl dark:bg-gray-800"><button class="flex w-full items-center justify-between bg-gray-50 p-3 text-left transition-colors hover:bg-gray-100 sm:p-4 dark:bg-gray-700 dark:hover:bg-gray-600"><div class="flex min-w-0 flex-1 items-center space-x-2 sm:space-x-3"><span class="truncate text-base font-semibold text-gray-900 sm:text-lg dark:text-gray-100"> </span> <span class="flex-shrink-0 rounded-full bg-gray-200 px-2 py-1 text-xs text-gray-700 dark:bg-gray-600 dark:text-gray-300"> </span></div> <div class="flex flex-shrink-0 items-center space-x-2"><span class="hidden text-sm text-gray-500 sm:block dark:text-gray-400"> </span> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></div></button> <!></div>');function la(a,e){Z(e,!0);const t=be(()=>e.group.machines.filter(b=>b.state==="available").length),r=be(()=>e.group.machines.filter(b=>b.state==="available"&&Fe(b.status,e.currentTime)).length);var n=ia(),i=x(n);i.__click=function(...b){e.toggle?.apply(this,b)};var l=x(i),u=x(l),S=x(u,!0);d(u);var _=T(u,2),I=x(_);d(_),d(l);var C=T(l,2),g=x(C),f=x(g);d(g);var o=T(g,2);d(C),d(i);var c=T(i,2);{var m=b=>{var k=sa(),v=x(k),y=x(v);d(v);var h=T(v,2);ce(h,21,()=>e.group.machines,ue,(w,N)=>{na(w,{get machine(){return s(N)},get currentTime(){return e.currentTime}})}),d(h),d(k),F(()=>{he(k,"id",`group-${e.group.name??""}`),z(y,`${s(t)??""} lediga maskiner${s(r)>0?` (${s(r)} nyligen använda)`:""}`)}),E(b,k)};P(c,b=>{e.expanded&&b(m)})}d(n),F(()=>{he(i,"aria-expanded",e.expanded),he(i,"aria-controls",`group-${e.group.name??""}`),z(S,e.group.name),z(I,`${e.group.machines.length??""} maskiner`),z(f,`${s(t)??""} lediga${s(r)>0?` (${s(r)} nyligen använda)`:""}`),ve(o,0,`h-5 w-5 transform text-gray-600 transition-transform dark:text-gray-400 ${e.expanded?"rotate-180":""}`)}),E(a,n),$()}le(["click"]);var oa=O('<div class="py-12 text-center"><svg class="mx-auto mb-4 h-12 w-12 text-gray-400 transition-colors dark:text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p class="text-sm text-gray-500 transition-colors sm:text-base dark:text-gray-400">Ingen data tillgänglig</p></div>');function da(a){var e=oa();E(a,e)}function ua(a,e,t){const r=new Set(s(e));r.size===s(t).length?r.clear():s(t).forEach(n=>r.add(n.name)),A(e,r,!0)}var ca=O('<!> <div class="mb-4 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"><div class="text-sm text-gray-600 dark:text-gray-400"> </div> <button class="self-start rounded bg-blue-500 px-4 py-2 text-sm text-white transition-colors hover:bg-blue-600 sm:self-auto dark:bg-blue-600 dark:hover:bg-blue-700"> </button></div> <div class="space-y-4 sm:space-y-6"></div>',1),va=O('<main class="mx-auto min-h-screen max-w-6xl bg-white p-2 transition-colors sm:p-4 dark:bg-gray-900"><!> <!> <!></main>');function ha(a,e){Z(e,!0);let t=j(se([])),r=j(!0),n=j(!1),i=j(null),l=j(!1),u=j(se(new Set(["Tvätt Servicehus 2"]))),S=j(!1),_=j(6e4),I=j(null),C=j(se(Date.now())),g=j(0),f=j(se(Date.now()));const o=[{value:0,label:"Av"},{value:3e4,label:"30 sekunder"},{value:6e4,label:"1 minut"},{value:3e5,label:"5 minuter"},{value:6e5,label:"10 minuter"}];async function c(p=!1){try{p?A(r,!0):A(n,!0),A(i,null);const D=await fetch("/api/tvatt");if(!D.ok)throw new Error(`HTTP ${D.status}: ${D.statusText}`);const R=await D.json();A(t,R,!0),A(C,Date.now(),!0)}catch(D){console.error("Error loading data:",D),A(i,{message:D.message,timestamp:Date.now(),isInitialLoad:p},!0),p&&s(t).length===0&&A(t,[],!0)}finally{A(r,!1),A(n,!1)}}function m(){c(s(i)?.isInitialLoad||!1)}function b(){A(l,!s(l))}function k(p){s(I)&&(clearInterval(s(I)),A(I,null)),s(_)!==p&&A(_,p,!0),p>0&&A(I,setInterval(()=>c(!1),p),!0)}function v(){A(S,!s(S))}function y(p){const D=new Set(s(u));D.has(p)?D.delete(p):D.add(p),A(u,D,!0)}oe(()=>{const p=setInterval(()=>{if(s(_)>0&&!s(n)){const D=Date.now()-s(C);A(g,Math.max(0,Math.ceil((s(_)-D)/1e3)),!0)}else A(g,0)},1e3);return()=>clearInterval(p)}),oe(()=>{const p=setInterval(()=>{A(f,Date.now(),!0)},1e3);return()=>clearInterval(p)});let h=!1;oe(()=>{h||(h=!0,c(!0),k(s(_)))});var w=va(),N=x(w);Ot(N,{onToggleSettings:v,children:(p,D)=>{Xt(p,{get settingsOpen(){return s(S)},get updateInterval(){return s(_)},get intervalOptions(){return o},get updating(){return s(n)},get updateTimer(){return s(g)},get lastUpdateTime(){return s(C)},event:(R,M)=>{R==="updateInterval"?k(M):R==="manualUpdate"?c(!1):R==="toggleSettings"&&v()}})},$$slots:{default:!0}});var B=T(N,2);Zt(B,{get error(){return s(i)},get updating(){return s(n)},get showErrorDetails(){return s(l)},toggleErrorDetails:b,retry:m});var H=T(B,2);{var K=p=>{ea(p,{})},Q=p=>{var D=de(),R=W(D);{var M=L=>{var V=ca(),G=W(V);aa(G,{get updating(){return s(n)}});var ee=T(G,2),q=x(ee),Pe=x(q);d(q);var ge=T(q,2);ge.__click=[ua,u,t];var Ke=x(ge,!0);d(ge),d(ee);var we=T(ee,2);ce(we,21,()=>s(t),ue,(te,ae)=>{{let Ge=be(()=>s(u).has(s(ae).name));la(te,{get group(){return s(ae)},get expanded(){return s(Ge)},get currentTime(){return s(f)},toggle:()=>y(s(ae).name)})}}),d(we),F(te=>{z(Pe,`${s(t).length??""} grupper, ${te??""} resurser`),z(Ke,s(u).size===s(t).length?"Dölj alla":"Visa alla")},[()=>s(t).reduce((te,ae)=>te+ae.machines.length,0)]),E(L,V)},U=L=>{var V=de(),G=W(V);{var ee=q=>{da(q)};P(G,q=>{!s(r)&&!s(i)&&q(ee)},!0)}E(L,V)};P(R,L=>{s(t).length>0?L(M):L(U,!1)},!0)}E(p,D)};P(H,p=>{s(r)?p(K):p(Q,!1)})}d(w),E(a,w),$()}le(["click"]);export{ha as component};
